(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{522:function(t,e,r){"use strict";var n=r(8),o=r(39),l=r(51),d=r(278),c=r(120),m=r(20),f=r(86).f,h=r(121).f,x=r(19).f,_=r(528).trim,v=n.Number,w=v,y=v.prototype,N="Number"==l(r(175)(y)),k="trim"in String.prototype,E=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){var r,n,o,l=(e=k?e.trim():_(e,3)).charCodeAt(0);if(43===l||45===l){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===l){switch(e.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+e}for(var code,d=e.slice(2),i=0,m=d.length;i<m;i++)if((code=d.charCodeAt(i))<48||code>o)return NaN;return parseInt(d,n)}}return+e};if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof v&&(N?m((function(){y.valueOf.call(r)})):"Number"!=l(r))?d(new w(E(e)),r,v):E(e)};for(var I,z=r(14)?f(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;z.length>C;C++)o(w,I=z[C])&&!o(v,I)&&x(v,I,h(w,I));v.prototype=y,y.constructor=v,r(22)(n,"Number",v)}},528:function(t,e,r){var n=r(12),o=r(52),l=r(20),d=r(529),c="["+d+"]",m=RegExp("^"+c+c+"*"),f=RegExp(c+c+"*$"),h=function(t,e,r){var o={},c=l((function(){return!!d[t]()||"​"!="​"[t]()})),m=o[t]=c?e(x):d[t];r&&(o[r]=m),n(n.P+n.F*c,"String",o)},x=h.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(m,"")),2&e&&(t=t.replace(f,"")),t};t.exports=h},529:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},530:function(t,e,r){var content=r(556);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(30).default)("b3e91116",content,!0,{sourceMap:!1})},555:function(t,e,r){"use strict";var n=r(530);r.n(n).a},556:function(t,e,r){(e=r(29)(!1)).push([t.i,'.page-detail .m-crumbs{margin:20px 0}.page-detail .m-sum-card{display:flex;background:#fff;box-shadow:0 5px 14px 0 rgba(0,0,0,.1);border-radius:10px;padding:20px}.page-detail .m-sum-card dt{flex:1;padding-bottom:5px}.page-detail .m-sum-card dt h1{font-size:26px;font-weight:500;color:#222}.page-detail .m-sum-card dt .el-rate{display:inline-block}.page-detail .m-sum-card dt .el-rate .el-rate__icon{font-size:12px}.page-detail .m-sum-card dt>span{font-size:12px;margin-right:10px}.page-detail .m-sum-card dt>ul{border-top:1px solid #e5e5e5;list-style:none;padding-top:5px;margin-top:10px}.page-detail .m-sum-card dt>ul li{font-size:14px;color:#666;padding:7px 0}.page-detail .m-sum-card dd{width:383px}.page-detail .m-detail-list{margin-top:34px}.page-detail .m-detail-list h3{margin:8px 0}.page-detail .m-detail-list ul{list-style:none;background-color:#fff;padding:20px 20px 0;margin-bottom:10px;border-radius:4px;border:1px solid #e5e5e5}.page-detail .m-detail-item .section{display:flex;padding:20px 0;border-bottom:1px solid #ddd;align-items:center}.page-detail .m-detail-item .section dd:first-child{padding-right:20px}.page-detail .m-detail-item .section dd:first-child img{width:100px;height:100px;border-radius:4px}.page-detail .m-detail-item .section dd:nth-child(2){flex:1}.page-detail .m-detail-item .section dd>h4{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:480px;font-size:16px;color:#222;font-weight:500;height:22px;line-height:22px;margin-bottom:4px;cursor:pointer}.page-detail .m-detail-item .section dd>p{font-size:12px;color:#666;height:17px;line-height:17px;margin-bottom:22px}.page-detail .m-detail-item .section dd>p .price{font-size:30px;color:#f60;margin-right:10px}.page-detail .m-detail-item .section dd>p .price:before{content:"￥";font-size:14px}.page-detail .m-detail-item li:last-child .section{border-bottom:none}.page-detail .m-title{font-size:20px;line-height:26px;margin-bottom:8px;margin-top:40px}.page-detail .deal-need-login{padding:30px 0;margin-bottom:40px;text-align:center;background-color:#fff;border:1px solid #e5e5e5}.page-detail .deal-need-login>img{display:inline-block;width:160px;height:120px;border-radius:4px}.page-detail .deal-need-login>span{display:block;margin:10px 0 14px;color:#666;font-size:16px;line-height:26px}.page-detail .deal-need-login>button{background-color:#13d1be;border-color:#13d1be}.page-detail .deal-need-login>button a{color:#fff}',""]),t.exports=e},595:function(t,e,r){"use strict";r.r(e);r(28);var n=r(4),o={props:{first:{type:String},second:{type:String},third:{type:String}}},l=r(5),d=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"m-crumbs"},[r("el-breadcrumb",{attrs:{separator:">"}},[r("el-breadcrumb-item",[t._v(t._s(t.first))]),t._v(" "),r("el-breadcrumb-item",[t._v(t._s(t.second))]),t._v(" "),r("el-breadcrumb-item",[t._v(t._s(t.third))])],1)],1)}),[],!1,null,null,null).exports,c=(r(522),{props:{meta:{type:Object,default:function(){return{}}}},computed:{rate:function(){return Number(this.meta.biz_ext.rating)||Math.floor(5*Math.random())},price:function(){return"人均¥"+Number(this.meta.biz_ext.cost)||!1}}}),summary=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"m-sum-card"},[r("dt",[r("h1",[t._v(t._s(t.meta.name))]),t._v(" "),r("el-rate",{attrs:{disabled:""},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}}),t._v(" "),r("span",[t._v(t._s(t.rate))]),t._v(" "),r("span",[t._v(t._s(t.price))]),t._v(" "),r("ul",[r("li",[t._v("地址："+t._s(t.meta.address))]),t._v(" "),r("li",[t._v("电话："+t._s(t.meta.tel))])])],1),t._v(" "),r("dd",[r("el-carousel",{attrs:{height:"214px","indicator-position":"none"}},t._l(t.meta.photos,(function(e,n){return r("el-carousel-item",{key:n},[r("h3",[r("img",{attrs:{src:e.url,alt:t.meta.title,width:"100%",height:"100%"}})])])})),1)],1)])}),[],!1,null,null,null).exports,m=(r(36),r(37),r(38),r(21),{props:{meta:{type:Object,default:function(){return{}}}},methods:{createCart:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,l,code,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,t.$axios.post("/cart/createCart",{id:Math.random().toString().slice(3,9),detail:{name:r.meta.name,price:Number(r.meta.biz_ext.cost),imgs:r.meta.photos}});case 3:n=e.sent,o=n.status,l=n.data,code=l.code,d=l.cartNo,200===o&&0==code&&(location.href="/cart?id=".concat(d));case 9:case"end":return e.stop()}}),e)})))()}}}),f={components:{item:Object(l.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"m-detail-item"},[r("dl",{staticClass:"section"},[r("dd",[r("img",{attrs:{src:t.meta.photos[0].url,alt:t.meta.photos[0].title}})]),t._v(" "),r("dd",[r("h4",[t._v(t._s(t.meta.name))]),t._v(" "),r("p",[t.meta.biz_ext&&t.meta.biz_ext.ticket_ordering?r("span",[t._v("剩余："+t._s(Number(t.meta.biz_ext.ticket_ordering)))]):t._e(),t._v(" "),t.meta.deadline?r("span",[t._v("截止日期："+t._s(t.meta.deadline))]):t._e()]),t._v(" "),r("p",[r("span",{staticClass:"price"},[t._v(t._s(Number(t.meta.biz_ext.cost)))]),t._v(" "),r("sub",[t._v("门店价"+t._s(Number(t.meta.biz_ext.cost)))])])]),t._v(" "),r("dd",[r("el-button",{attrs:{type:"warning",round:""},on:{click:t.createCart}},[t._v("\n        立即抢购\n      ")])],1)])])}),[],!1,null,null,null).exports},props:{more:{type:Array,default:function(){return[]}}}},h={components:{crumbs:d,summa:summary,list:Object(l.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-detail-list"},[e("ul",[e("li",[this._v(this._s(this.more.length)+"款套餐")]),this._v(" "),this._l(this.more,(function(t,r){return e("item",{key:r,attrs:{meta:t}})}))],2)])}),[],!1,null,null,null).exports},computed:{validList:function(){return this.more.filter((function(t){return t.photos.length}))}},asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,l,d,c,m,f,h,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query,n=r.city,o=r.keyword,l=r.type,e.next=3,t.$axios.get("/search/products",{params:{city:n,keyword:o}});case 3:if(d=e.sent,c=d.status,m=d.data,f=m.product,h=m.more,x=m.login,200!==c){e.next=11;break}return e.abrupt("return",{product:f,more:h,login:x,first:n+"美团",second:n+l,third:n+o});case 11:case"end":return e.stop()}}),e)})))()}},x=(r(555),Object(l.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-detail"},[r("el-row",[r("el-col",{attrs:{span:24}},[r("crumbs",{attrs:{first:t.first,second:t.second,third:t.third}})],1)],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("summa",{attrs:{meta:t.product}})],1)],1),t._v(" "),t.validList.length?r("el-row",{staticClass:"m-title"},[r("el-col",{attrs:{span:24}},[r("h3",[t._v("商家团购及优惠")])])],1):t._e(),t._v(" "),t.validList.length?r("el-row",[r("el-col",{attrs:{span:24}},[t.login?r("list",{attrs:{more:t.validList}}):r("div",{staticClass:"deal-need-login"},[r("img",{attrs:{src:"//p0.meituan.net/codeman/56a7d5abcb5ce3d90fc91195e5b5856911194.png",alt:"登录查看"}}),t._v(" "),r("span",[t._v("请登"),r("nuxt-link",{attrs:{to:{path:"login"}}},[t._v("录后")]),t._v("查看详细团购优惠")],1)])],1)],1):t._e()],1)}),[],!1,null,null,null));e.default=x.exports}}]);