(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{534:function(t,e,r){var content=r(583);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(30).default)("5a7a4dc9",content,!0,{sourceMap:!1})},582:function(t,e,r){"use strict";var n=r(534);r.n(n).a},583:function(t,e,r){(e=r(29)(!1)).push([t.i,".page-order{margin-top:20px}.page-order .newClick,.page-order .newClick :link,.page-order .newClick :visited{color:#2bb8aa}.page-order .newClick :hover{color:orange}.page-order .navbar{background:#fff;border:1px solid #e5e5e5;border-radius:4px;box-sizing:border-box;font-size:16px;color:#222;padding:30px 20px 0 30px}.page-order .navbar dd{font-size:14px;color:#666;margin:15px 0}.page-order .navbar dd>i{float:right;margin-top:3px}.page-order .table{background-color:#fff;margin-left:10px;white-space:nowrap;border:1px solid #e5e5e5;border-radius:4px;padding:20px 20px 0}.page-order .table .el-row{padding:20px 0;height:131px;border-bottom:1px solid #e5e5e5}.page-order .table .el-row:last-child{border:none}.page-order .table .el-row .el-col{height:90px;justify-content:center;align-items:center;display:flex;flex-direction:column}.page-order .table .el-row .el-col:nth-child(2){align-items:flex-start}.page-order .table .el-row .el-col:nth-child(2) h4{font-size:16px;color:#222;margin:10px 0;font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:300px}.page-order .table img{width:90px;height:90px}.page-order .table .m-order .empty{text-align:center;padding:30px}",""]),t.exports=e},599:function(t,e,r){"use strict";r.r(e);r(28);var n=r(4),o=(r(36),{props:{list:{type:Array,default:function(){return[]}},now:{type:String,default:function(){return""}}},methods:{pay:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,code;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.post("/order/changeStatus",{id:t});case 2:n=r.sent,o=n.status,code=n.data.code,200===o&&0===code&&e.$alert("您已成功支付","支付成功",{confirmButtonText:"刷新",callback:function(t){location.href="/order"}});case 6:case"end":return r.stop()}}),r)})))()},drop:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,code;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.post("/order/delete",{id:t});case 2:n=r.sent,o=n.status,code=n.data.code,200===o&&0===code&&e.$alert("您已成功删除订单","删除成功",{confirmButtonText:"刷新",callback:function(t){location.href="/order"}});case 6:case"end":return r.stop()}}),r)})))()}}}),l=r(5),c={components:{list:Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"m-order"},[r("ul",[t.list.length?r("li",t._l(t.list,(function(e,n){return r("el-row",{key:n},[r("el-col",{attrs:{span:4}},[r("img",{attrs:{src:e.img,alt:e.name}})]),t._v(" "),r("el-col",{attrs:{span:10}},[r("h4",[t._v(t._s(e.name))]),t._v(" "),r("p",[t._v("数量："+t._s(e.count))])]),t._v(" "),r("el-col",{attrs:{span:4}},[t._v("\n          总价：¥"+t._s(e.total)+"\n        ")]),t._v(" "),r("el-col",{attrs:{span:6}},["all"===t.now?[t._v("\n            "+t._s(e.statusTxt)+"\n          ")]:"all"!==t.now&&0===e.status?[t._v("\n            "+t._s(e.statusTxt)+"\n            "),r("a",{staticClass:"newClick",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.pay(e.id)}}},[t._v("点击支付")])]:[t._v("\n            "+t._s(e.statusTxt)+"\n            "),r("a",{staticClass:"newClick",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.drop(e.id)}}},[t._v("点击删除")])]],2)],1)})),1):r("li",{staticClass:"empty"},[t._v("没有订单")])])])}),[],!1,null,null,null).exports},data:function(){return{activeName:"all",cur:[]}},watch:{activeName:function(){var t;"all"!==this.activeName?(t="unpay"===this.activeName?0:1,this.cur=this.list.filter((function(e){return e.status===t}))):this.cur=[]}},methods:{handleClick:function(t){this.activeName=t.name}},asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,code,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("/order/getOrder");case 2:if(r=e.sent,n=r.status,o=r.data,code=o.code,l=o.list,200!==n||0!==code){e.next=9;break}return e.abrupt("return",{list:l.map((function(t){return{id:t.id,img:t.imgs[0].url,name:t.name,count:t.count,total:t.total,status:t.status,statusTxt:0===t.status?"待付款":"已付款"}}))});case 9:case"end":return e.stop()}}),e)})))()}},d=(r(582),Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-order"},[r("el-row",[r("el-col",{staticClass:"navbar",attrs:{span:4}},[r("h3",[t._v("我的美团")]),t._v(" "),r("dl",[r("dt",[t._v("我的订单")]),t._v(" "),r("dd",[t._v("全部订单"),r("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),r("dd",[t._v("待付款"),r("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),r("dd",[t._v("待使用"),r("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),r("dl",[r("dt",[t._v("我的收藏")]),t._v(" "),r("dd",[t._v("收藏的商家"),r("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),r("dd",[t._v("收藏的团购"),r("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),r("dl",[r("dt",[t._v("抵用券")]),t._v(" "),r("dd",[t._v("可用券"),r("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),r("dd",[t._v("失效券"),r("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),r("dl",[r("dt",[t._v("个人信息")]),t._v(" "),r("dd",[t._v("账户设置"),r("i",{staticClass:"el-icon-arrow-right"})])])]),t._v(" "),r("el-col",{staticClass:"table",attrs:{span:19}},[r("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"全部订单",name:"all"}},[r("list",{attrs:{list:t.list,now:t.activeName}})],1),t._v(" "),r("el-tab-pane",{attrs:{label:"待付款",name:"unpay"}},[r("list",{attrs:{list:t.cur,now:t.activeName}})],1),t._v(" "),r("el-tab-pane",{attrs:{label:"已付款",name:"paid"}},[r("list",{attrs:{list:t.cur,now:t.activeName}})],1)],1)],1)],1)],1)}),[],!1,null,null,null));e.default=d.exports}}]);